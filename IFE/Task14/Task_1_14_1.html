<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>IFE JavaScript Task 02</title>
    </head>
    <body>
        <h3>污染城市列表</h3>
        <ul id="aqi-list">
        <!--
        <li>第一名：福州（样例），10</li>
        	<li>第二名：福州（样例），10</li> -->
        </ul>

        <script type="text/javascript">
            (function () {
                var aqiData = [
                    ["北京", 90],
                    ["上海", 50],
                    ["福州", 10],
                    ["广州", 50],
                    ["成都", 90],
                    ["西安", 100]
                ];

                var $ = function(selector) {
                    return document.querySelector(selector);
                }

                // 进行降序排序
                var sortData = function() {
                    aqiData.sort(function(a, b) {
                        return b[1] - a[1];
                    });
                }

                // 筛选出空气质量指数大于 60 的城市
                var filterData = function() {
                    aqiData = aqiData.filter(function(r) {
                        return r[1] > 60;
                    });
                }

                var renderData = function() {
                    var ranking = ['一', '二', '三', '四', '五', '六', '七'];
                    var ul = $('#aqi-list');

                    aqiData.forEach(function(currentValue, index) {
                        ul.insertAdjacentHTML('beforeend', `<li>第${ranking[index]}名： ${currentValue[0]}, 空气质量指数： ${currentValue[1]}</li>`);
                    });
                }

                var __main = function() {
                    filterData();
                    sortData();
                    renderData();
                }

                __main();
            })();
        </script>
    </body>
</html>
